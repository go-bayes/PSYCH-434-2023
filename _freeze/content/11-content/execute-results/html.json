{
  "hash": "a8a0b02afda485b896ff6f2313ee799b",
  "result": {
    "markdown": "---\ntitle: \"Measurement from a Causal Perspective\"\ndate: \"2023-MAY-30\"\n---\n\n  \n  \n## Overview\n  \n\n\n\n\n\n\n\n\n### Multiple Versions of Treatment\n\n\n\n\n\nRecall, a causal effect is defined as the difference in the expected potential outcome when everyone is exposed (perhaps contrary to fact) to one level of a treatment, conditional on their levels of a confounder,  with the expected potential outcome when everyone is exposed to a a different level of a treatement  (perhaps contrary to fact), conditional on their levels of a counfounder.  \n\n$$ \\Delta_{ate} = \\sum_c \\left( \\mathbb{E}[Y|A=a,c] - \\mathbb{E}[Y|A=a^*,c] \\right) P(c)$$\n\n\n\nIn causal inference, the multiple versions of treatment theory allows us to handle situations where the treatment isn't uniform, but instead has several variations. Each variation of the treatment, or \"version\", can have a different impact on the outcome. This theory allows us to consider these varying impacts in our causal models.\n\nUnder the multiple versions of treatment framework, the consistency assumption is redefined. It requires that for each version of the treatment, the outcome under that version is equal to the observed outcome when that version is received. \n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![Multiple Versions of Treatment](11-content_files/figure-html/fig-dag-multiple-version-treatment-1.png){#fig-dag-multiple-version-treatment width=100%}\n:::\n:::\n\n\n\nFurther, a \"no confounding\" assumption is required, which states that the potential outcomes for each version are independent of the version received, given the covariates.\n\n\nThe absence of confounding for the effect of $K$ on $Y$ given $C$ is denoted when Y$_k$ is independent of $K$, conditionally based on $C$ or $Y_k \\coprod A|K,C$ (i.e. conditional on$C$, $A$ gives no information about $Y$ once $K$ and $C$ are accounted for) . The consistency assumption is deemed to be valid when $Y = Y_k$ if $K = k$. \n\nLet's assume the researcher only possesses data on $(A, Y, C)$. When Y$_k$ is conditionally independent of $K$ based on $C$, there is no confounding for the effect of $K$ on $Y$ given $C$. Then for any  $K = k$ results in $Y = Y_k$, the consistency assumption is met. Let's suppose only information on $(A, Y, C)$  is available to the researcher.\n\n\n\n$$ \\Delta_{ate} = \\sum_{k,c} \\mathbb{E}[Y_k|c] P(k|a,c) P(c) - \\sum_{k,c} \\mathbb{E}[Y_k|c] P(k|a^*,c) P(c)$$\n\n\nIt represents a comparison in a hypothetical randomised trial. In this scenario, within covariates $C$ strata, individuals in one group receive a treatment $K$ version randomly assigned from the inherent $K$ distribution in the $(A = a, C = c)$ subpopulation. Meanwhile, individuals in the other group receive a randomly assigned $K$ version from the same distribution.\n\nThis theory finds its utility in practical scenarios where treatments seldom resemble each other, like healthcare where different doctors may administer slightly distinct treatments, or in education where teaching methods differ. By incorporating these treatment variations, we gain more accurate insights into the causal effect.\n\nSo VanderWeele proposes that this theory of causal inference under multiple treatments could be advantageous for handling the consistency assumption. \n\n\nHe next proposes that this theory may be helpful for explaining measurements. \n\n\n\n### Reflective and formative measurement models\n\n\nRecall, the reflective measurement model assumes that an underlying latent continuous variable $\\eta$ causes measured indicatorsL$X_1\\dots X_n$ such that:\n\n$$X_i = \\lambda_i \\eta + \\varepsilon_i$$\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![Reflective model: assume univariate latent variable η giving rise to indicators X1...X3. Figure from VanderWeele: doi: 10.1097/EDE.0000000000001434](11-content_files/figure-html/fig-dag-latent-1-1.png){#fig-dag-latent-1 width=80%}\n:::\n:::\n\n\n\n\n\nRecall the theory of multiple versions of treatments. This concept accounts for varying impacts of different treatment versions on the outcome. The consistency assumption is revisited.When a specific version of treatment is received, the observed outcome matches the outcome under *that* version. In addition, the theory requires \"no confounding\" given measured covariates for each version are of the treatment.\n\n\nVanderweele applies the following substitution: \n\n\n$$\\Delta_{ate} = \\sum_{\\eta,c} \\mathbb{E}[Y_\\eta|c] P(\\eta|A=a+1,c) P(c) - \\sum_{\\eta,c} \\mathbb{E}[Y_\\eta|c] P(\\eta|A=a,c) P(c)$$\nVanderWeele substitutes $K$ with $\\eta$ from the previous section, and compare measurement level $A = a + 1$ with $A = a$. Now, if the influence of $\\eta$ on $Y$ is not confounded given $C$\n\nThus despite varying reliabilities $\\eta_i$, which might be overlooked, $\\Delta_{ate}$ retains its interpretability as a comparison in a hypothetical randomised trial. \n\nHere, within the strata of covariates $C$, individuals in one group are randomised to a value of $\\eta$, derived from the actual $\\eta$ distribution in the subpopulation with $(A = a + 1, C = c)$. In the other group, individuals are randomized to a $\\eta$ value from the distribution in the subpopulation with $(A = a, C = c)$.\n\nIn essence, this connection between measurement and the multiple versions of treatment framework provides a powerful tool for causal inference varying reliabilities of measurement.\n\nHowever, as with the theory of multiple treatments, we might not known how to interpret our results.  \n\n\nNote that the same considerations apply to the \"formative model of measurement\" where it is assumed that the latent $\\eta$ is causally efficacious such that: \n\n$\\eta = \\sum_i\\lambda_i X_i + \\varepsilon$ \n\nHowever, as with the theory of multiple treatments and the reflective model, we might not known how to interpret our results for the formative model .  \n\n\n<!-- ### Reflective model  -->\n\n<!-- ```{tikz} -->\n<!-- #| label: fig-dag-latent-2 -->\n<!-- #| fig-cap: \"Reflective Model: causal assumptions\" -->\n<!-- #| out-width: 100% -->\n<!-- #| echo: false -->\n\n<!-- \\usetikzlibrary{positioning} -->\n<!-- \\usetikzlibrary{shapes.geometric} -->\n<!-- \\usetikzlibrary{arrows} -->\n<!-- \\usetikzlibrary{decorations} -->\n<!-- \\tikzstyle{Arrow} = [->, thin, preaction = {decorate}] -->\n<!-- \\tikzset{>=latex} -->\n\n<!-- \\begin{tikzpicture}[{every node/.append style}=draw] -->\n<!-- \\node [rectangle, draw=white] (L) at (0, 0) {L}; -->\n<!-- \\node [rectangle, draw=white] (eta) at (2, 0) {$\\eta$}; -->\n<!-- \\node [rectangle, draw=white] (X1) at (4, 1) {X1}; -->\n<!-- \\node [rectangle, draw=white] (X2) at (4, 0) {$\\vdots$}; -->\n<!-- \\node [rectangle, draw=white] (Xn) at (4, -1) {X$_n$}; -->\n<!-- \\node [rectangle, draw=white] (A) at (6, 0) {A}; -->\n\n<!-- \\node [rectangle, draw=white] (Y) at (8, 0) {Y}; -->\n\n<!-- \\draw [-latex, bend right=80, draw=black] (L) to (Y); -->\n<!-- \\draw [-latex, bend left=80, draw=red] (eta) to (Y); -->\n<!-- \\draw [-latex, draw=black] (eta) to (X1); -->\n<!-- \\draw [-latex, draw=black] (eta) to (X2); -->\n<!-- \\draw [-latex, draw=black] (eta) to (Xn); -->\n\n<!-- \\draw [-latex, draw=black] (X1) to (A); -->\n<!-- \\draw [-latex, draw=black] (X2) to (A); -->\n<!-- \\draw [-latex, draw=black] (Xn) to (A); -->\n\n<!-- \\end{tikzpicture} -->\n<!-- ``` -->\n\n<!-- Reflective model & causal assumptions -->\n\n<!-- ::: -->\n\n\n::: {#fig-latent layout-ncol=1}\n\n::: {.cell}\n::: {.cell-output-display}\n![Formative model:: assume univariate latent variable from which the indicators X1...X3 give rise.](11-content_files/figure-html/fig-dag-latent-formative-1.png){#fig-dag-latent-formative width=80%}\n:::\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n![Formative model: causal assumptions](11-content_files/figure-html/fig-dag-formative-assumptions-1.png){#fig-dag-formative-assumptions width=100%}\n:::\n:::\n\n\nFormative model & causal assumptions\n\n:::\n\n\n\n\n### VanderWeele's worry for the basic reflective model: \n\n> However, this analysis of reflective and formative models assumed that the latent η was causally efficacious. This may not be the case.\n\n\nThese models are also compatible with the data:\n\n\n::: {#fig-latent layout-ncol=1}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![Formative model is compatible with indicators causing outcome](11-content_files/figure-html/fig-dag-formative-assumptions-compatible-1.png){#fig-dag-formative-assumptions-compatible width=100%}\n:::\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n![Reflective model is compatible with indicators causing the outcome](11-content_files/figure-html/fig-dag-reflectiveassumptions-compatible-1.png){#fig-dag-reflectiveassumptions-compatible width=100%}\n:::\n:::\n\n\n\nFormative and Reflective Models are compatible with indicators having causal effects \n\n:::\n\n\n## More complex models (is this a causal graph?)\n\nVanderWeele writes this: \n\n\n::: {.cell}\n::: {.cell-output-display}\n![Multivariate reality gives rise to the indicators, from which we draw our measure.r](11-content_files/figure-html/fig-dag-multivariate-reality-1.png){#fig-dag-multivariate-reality width=100%}\n:::\n:::\n\n\n\nRather, I would prefer to say A$ = f(X_1, \\dots X_n)$, and to make the point we write: \n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![Multivariate reality gives rise to the indicators, from which we draw our measure.r](11-content_files/figure-html/fig-dag-multivariate-reality-bulbulia-1.png){#fig-dag-multivariate-reality-bulbulia width=100%}\n:::\n:::\n\n\n\n\n\n\n\n\n## VanderWeele's model of reality (is this a causal diagramme?)\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![Multivariate reality gives rise to the latent variables,...](11-content_files/figure-html/fig-dag-multivariate-reality-complete-1.png){#fig-dag-multivariate-reality-complete width=100%}\n:::\n:::\n\n\n\nHowever this is not a causal graph. Can we do better? \n\n## Perhaps this is better\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![Multivariate reality gives rise to the latent variables,if reality continues to strongly effect η at t0 ...tn, there is an open backdoor path to Y through our concepts and constructs.](11-content_files/figure-html/fig-dag-multivariate-reality-complete-bulbulia-1.png){#fig-dag-multivariate-reality-complete-bulbulia width=100%}\n:::\n:::\n\n\n\n\n\n  \n  \n## Slides\n",
    "supporting": [
      "11-content_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}