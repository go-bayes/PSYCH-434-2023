{
  "hash": "1bd81f42231854f9c0a1e6a15715738d",
  "result": {
    "markdown": "---\ntitle: \"Temporal Causal Diagrams: Unveiling Causal Order and Indexing Nodes by Time\"\nexecute:\n  warning: false\ncode_folding: true\necho: true\ndraft: false\nauthor:\n  - name: Joseph Bulbulia\norcid: 0000-0002-5861-2056\naffiliation: Victoria University of Wellington, New Zealand\nemail: joseph.bulbulia@vuw.ac.nz\ncorresponding: yes\ndate-format: short\nsanitize: true\nkeep-tex: false\neditor_options: \n  chunk_output_type: inline\n---\n\n\n\n\n\n## Common Causal Graphs\n\n\n\n\n\n\n## Graphs of Canonical confounders\n\n\n### Confounding by Common Cause. \n\n\nThe problem of confounding by common cause arises when there is an unmeasured or unaccounted-for variable, denoted as \"L,\" that influences both the treatment variable, denoted as \"A,\" and the outcome variable, denoted as \"Y.\" This confounder L creates an association between A and Y that is not solely due to the direct causal effect of A on Y. Instead, the observed association between A and Y may be partially or entirely driven by the presence of L, making it difficult to isolate and accurately estimate the true causal effect of A on Y.\n\n\n::: {.cell}\n::: {.cell-output-display}\n![Counfounding by common cause.](common_graphs_files/figure-html/fig-dag-common-cause-1.png){#fig-dag-common-cause width=100%}\n:::\n:::\n\n\n\n\n### Solution: adjust for the pre-exposure confounder\n\nConfounding by a pre-exposure confounder can be addressed by adjusting for it. A pre-exposure confounder refers to a variable that affects both the treatment (A) and the outcome (Y) but is measured before the treatment is assigned. By adjusting for this confounder, typically through statistical techniques such as stratification, regression, or matching, we can account for its influence and isolate the true causal effect of the treatment on the outcome. This adjustment helps to mitigate the bias caused by the confounder, allowing for a more accurate estimation of the causal relationship between the treatment and the outcome.\n\n\n::: {.cell}\n::: {.cell-output-display}\n![Solution: adjust for pre-exposure confounder.](common_graphs_files/figure-html/fig-dag-common-cause-solution-1.png){#fig-dag-common-cause-solution width=100%}\n:::\n:::\n\n\n\n### Second problem: conditioning on a common effect (Collider Stratification)\n\nConditioning on a common effect refers to a situation where there is a variable, denoted as \"L,\" that is affected by both the treatment (A) and an outcome (Y). When conditioning on L, it creates a spurious association between A and Y, making it challenging to determine the true causal relationship. This occurs because the relationship between A and Y becomes confounded by the common effect L. Conditioning on L can lead to biased estimates and erroneous conclusions about the causal effect of A on Y, as the observed association may be solely driven by the influence of L.\n\n\n::: {.cell}\n::: {.cell-output-display}\n![Solution: ensure confounder is measured prior to the exposure.](common_graphs_files/figure-html/fig-dag-common-effect-1.png){#fig-dag-common-effect width=100%}\n:::\n:::\n\n\n\n\n### Solution: ensure confounders are measured before the exposure\n\n\nTo address the problem of conditioning on a common effect, it is crucial to measure all potential confounders before the exposure (A). By measuring confounders prior to exposure, we can ensure that they are not influenced by A and therefore do not lie on the causal pathway between A and Y. This approach allows for proper adjustment and control of confounding variables, ensuring that the estimated causal effect of A on Y is not distorted by conditioning on the common effect L. By measuring all relevant confounders in advance, researchers can minimize bias and obtain more reliable estimates of the true causal relationship between A and Y.\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![Causal graph reveals bias: solve by stratification](common_graphs_files/figure-html/fig-dag-common-effect-solution-1.png){#fig-dag-common-effect-solution width=100%}\n:::\n:::\n\n\n\n\n### Third problem: conditioning on a mediator \n\nConditioning on a mediator refers to a situation where a variable, known as the mediator (L), lies on the causal pathway between the treatment (A) and the outcome (Y). When conditioning on M, it can lead to biased estimates of the direct causal effect of A on Y. This occurs because conditioning on L may block or distort the true causal pathway between A and Y, making it challenging to isolate the direct effect of A on Y. \n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![Third problem: conditioning on a mediator.](common_graphs_files/figure-html/fig-dag-mediator-1.png){#fig-dag-mediator width=100%}\n:::\n:::\n\n\n\n\n### Solution: ensure confounders are measured before the exposure.\n\nTo address the problem of mediator bias, do not condition on a mediator. Ensure that L occurs before A (and Y). This will set you on the path to grace. \n\n\n::: {.cell}\n::: {.cell-output-display}\n![Do not condition on a mediator](common_graphs_files/figure-html/fig-dag-mediator-solution-1.png){#fig-dag-mediator-solution width=100%}\n:::\n:::\n\n\n\n### Fourth problem: conditioning on a descendant\n\n\nThe problem of confounding by conditioning on a descendant arises when there is a confounder L that is caused by an unobserved variable U, occurring after the exposure A. Additionally, U also causes the outcome Y, which occurs after L. While A causes L, it does not directly cause Y, and U does not cause A. In this scenario, conditioning on L, which is a descendant of A, can lead to bias. This is because conditioning on L may introduce an association between A and Y that arise from A to L and through the backdoorpath from L through U to Y. \n\n\n::: {.cell}\n::: {.cell-output-display}\n![Conditioning on a descendant](common_graphs_files/figure-html/fig-dag-descendent-1.png){#fig-dag-descendent width=100%}\n:::\n:::\n\n\n\n### Solution: (yet again) ensure that counfounders are measured before the exposure\n\n\nEnsuring the confounder (L) is measured before the exposure (A) has two beneficial properties. Firstly, it rules out collider bias, which occurs when conditioning on a collider (L) introduces spurious associations. Secondly, if an unmeasured confounder is associated with both A, Y, and L, adjusting for L helps reduce confounding caused by the unmeasured confounder. By measuring L before A, these advantages can be achieved, allowing for more accurate estimation of the causal effect of A on Y.\n\n\n::: {.cell}\n::: {.cell-output-display}\n![Solution: conditioning on a descendent is part of the solution, not the problem, when baseline confounders are measured before the exposure.](common_graphs_files/figure-html/fig-dag-descendent-solution-1.png){#fig-dag-descendent-solution width=100%}\n:::\n:::\n\n\n## EXAMPLES \n\n\n### Common cause of exposure and outcome. \n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![Common cause of exposure and outcome: example](common_graphs_files/figure-html/fig-dag-1-1.png){#fig-dag-1 width=100%}\n:::\n:::\n\n\n### Solution: Adjust for Confounder\n\n\n::: {.cell}\n::: {.cell-output-display}\n![Solution to this problem.](common_graphs_files/figure-html/fig-dag-2-1.png){#fig-dag-2 width=100%}\n:::\n:::\n\n\n\n\n### Bias: exposure at baseline is a common cause of the exposure at t1 and outcome at t2\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![Causal graph reveals bias from pre-exosure indicator](common_graphs_files/figure-html/fig-dag-3-1.png){#fig-dag-3 width=100%}\n:::\n:::\n\n\n\n\n\n### Solution: adjust for confounder at baseline\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![Solution to this problem](common_graphs_files/figure-html/fig-dag-4-1.png){#fig-dag-4 width=100%}\n:::\n:::\n\n\n\n\n\n###  A more thorough confounding control\n\n\n::: {.cell}\n::: {.cell-output-display}\n![Causal graph:more general panel design](common_graphs_files/figure-html/fig-dag-5-1.png){#fig-dag-5 width=100%}\n:::\n:::\n\n\n\n###  Generic 3-wave panel design (VanderWeeele 2020)\n\n\n::: {.cell}\n::: {.cell-output-display}\n![Causal graph: three-wave panel design](common_graphs_files/figure-html/fig-dag-6-1.png){#fig-dag-6 width=100%}\n:::\n:::\n\n\n\n\n<!-- ### Selection bias version 1 -->\n\n\n\n\n<!-- ```{tikz} -->\n<!-- #| label: fig-dag-7 -->\n<!-- #| fig-cap: \"Causal graph: three-wave panel design with selection bias\" -->\n<!-- #| out-width: 100% -->\n<!-- #| echo: false -->\n\n<!-- \\usetikzlibrary{positioning} -->\n<!-- \\usetikzlibrary{shapes.geometric} -->\n<!-- \\usetikzlibrary{arrows} -->\n<!-- \\usetikzlibrary{decorations} -->\n<!-- \\tikzstyle{Arrow} = [->, thin, preaction = {decorate}] -->\n<!-- \\tikzset{>=latex} -->\n\n<!-- \\begin{tikzpicture}[{every node/.append style}=draw] -->\n\n<!-- \\node [rectangle, draw=white] (U) at (0, 0) {U}; -->\n<!-- \\node [rectangle, draw=black, align=left] (L) at (2, 0) {t0/L \\\\t0/A \\\\t0/Y}; -->\n<!-- \\node [rectangle, draw=white] (A) at (4, 0) {t1/A}; -->\n<!-- \\node [ellipse, draw=white] (Y) at (6, 0) {t2/Y}; -->\n<!-- \\node [rectangle, draw=black] (S) at (8, 0) {S}; -->\n\n<!-- \\draw [-latex, draw=black] (U) to (L); -->\n<!-- \\draw [-latex, draw=black] (L) to (A); -->\n<!-- \\draw [-latex, bend left=50, draw=black] (L) to (Y); -->\n<!-- \\draw [-latex, bend right=50, draw=black, dotted] (U) to (Y); -->\n<!-- \\draw [-latex, bend left=50, draw=black, dotted] (U) to (A); -->\n<!-- \\draw [-latex, draw=black] (Y) to (S); -->\n<!-- \\draw [-latex, bend right, draw=black] (A) to (S); -->\n<!-- \\draw [-latex, draw=red, dashed] (A) to (Y); -->\n\n\n<!-- \\end{tikzpicture} -->\n\n\n<!-- ``` -->\n\n\n### Selection bias\n\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![Causal graph: three-wave panel design with selection bias](common_graphs_files/figure-html/fig-dag-8-1.png){#fig-dag-8 width=100%}\n:::\n:::\n\n\n\n## Important Causal Diagrammes\n\n\n\n\n### What if mediation is of interest? \n\n\nConsider the assumptions required for mediation analysis.\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![Assumptions for mediation analysis](common_graphs_files/figure-html/fig-dag-mediation-assuptions-1.png){#fig-dag-mediation-assuptions width=100%}\n:::\n:::\n\n\n\n\n\n### Confounder-Treatment Feedback\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![Confounder Treatement Feedback](common_graphs_files/figure-html/fig-dag-9-1.png){#fig-dag-9 width=100%}\n:::\n:::\n",
    "supporting": [
      "common_graphs_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}